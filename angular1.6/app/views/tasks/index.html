<div class="task-container">
  <h2>Minhas Tarefas</h2>
  {{error}}
  <form ng-submit="addTask()" ng-if="!editingTask">
    <input type="text" placeholder="Título" ng-model="newTask.title" required />
    <input type="text" placeholder="Descrição" ng-model="newTask.description" />
    <input type="date" ng-model="newTask.due_date" />
    <button type="submit">Adicionar</button>
  </form>

  <form ng-submit="updateTask()" ng-if="editingTask">
    <input type="text" ng-model="editingTask.title" required />
    <input type="text" ng-model="editingTask.description" />
    <input type="date" ng-model="editingTask.due_date" />
    <button type="submit">Atualizar</button>
    <button type="button" ng-click="cancelEdit()">Cancelar</button>
  </form>

  <ul>
    <li ng-repeat="task in tasks">
      <span ng-class="{'done': task.is_done}"
        >{{ task.title }} ({{ task.due_date }})</span
      >
      <button ng-click="editTask(task)">Editar</button>
      <button ng-click="deleteTask(task.id)">Excluir</button>
      <button ng-click="toggleDone(task)">
        {{ task.is_done ? 'Desmarcar' : 'Concluir' }}
      </button>
    </li>
  </ul>

  <button ng-click="logout()">Sair</button>
</div>

<style>
  .task-container {
    max-width: 500px;
    margin: auto;
  }
  .done {
    text-decoration: line-through;
    color: green;
  }
  input {
    display: block;
    margin-bottom: 5px;
  }
  button {
    margin-right: 5px;
  }
</style>
